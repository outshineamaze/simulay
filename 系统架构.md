#第一章： 简介，功能架构 与 技术架构

simulay是一个基于分布式容器化web在线仿真教学交互演示系统， 其中核心的技术是基于容化的微服务运算平台，不仅有着分布式可扩展的优点， 同时在系统性能和系统安全等方面有着极大的提高。在功能上提供业界领先的 webIDE 和webTerminal 以供学生仿真调试使用。配合实验管理，容器管理等功能实完美的教学训练闭环。
在开放与可扩展性上 ， 提供开放的数据API，同时以API的形式开放仿真运算平台供开发者调用

##功能架构

本项目着重研究基于目前最前沿的web前端与后台技术构建的可视化交互仿真系统，主要分为三大模块（子系统）：
1. 在线仿真系统：在线编辑，调试，统计， 管理实验的可视化的web前端展示系统
2. 容器管理：分布式 + 容器技术 + 仿真数据缓存，提高仿真系统的整体响应速度和系统的可扩展性
3. 开放API，数据API提供GraphQL查询接口， 运算API提供第三方调用仿真接口便于开发者使用。开放拓展系统的功能便于支持机器学习与数据挖掘。

下面是系统的simulay系统整体的功能框图：
![系统架构](img/simulay功能架构.png)

在三大模块的基础上， 又对各个功能做了细分，划分为更小粒点的模块功能。

##技术架构：

![技术架构](img/simulay系统架构.svg)
###在线仿真系统
系统是基于浏览器平台的，无论用户使用的是什么操作系统， 只需要一个webkit内核的浏览器，即可打开该系统。
如果把用户的使用仿真功能过程看作一个一个流的话：
1. 后台最开始接受到请求的是Nginx 负载均衡服务器（NGINX采用了异步、事件驱动的方法来处理连接，可以非常好地处理百万级规模的并发请求），
2. Nginx 服务器将请求转发到 基于NodeJS的WebSite服务程序，这个程序主要负责处理系统的业务逻辑，主要的工作就是对外接受请求， 对内调用各微服务， 最后把运算数据返回到浏览器前端。
3. webSite调用  runner仿真平台， runner调用 容器系统的接口创建一个容器，然后在容器中运行仿真代码。
4. 容器运算得出结果之后， 调用回调函数，把结果写入到底层的 数据库和缓存中， 同时更新该实验的结果数据。 最后把结果返回到浏览器前端

###数据API平台：
数据API接口是对外开放的开发者计划的一部分，主要是的功能就是把整个系统的各项功能包装一遍， 使用统一的接口风格，对外提供统一的API调用服务，对系统将每个API请求都转发到对应的模块中去，实验仿真数据查询， 容器管理，runner仿真运算平台等都可以进行API包装然后对外服务。

### 容器管理系统：
容器管理系统提供的在线容器创建，运行，暂停，删除等操作， 为用户提供一个轻量级的容器服务（类似虚拟机，但是在资源的占用率和创建启动速度上都完胜虚拟机），让用户以最少的资源最快的速度得到一个云服务资源。



